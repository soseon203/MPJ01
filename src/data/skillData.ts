// ============================================================
// 라스트타워 - 스킬 데이터 (60 skills)
// ============================================================

import type { SkillId, SkillData, SkillRarity } from '@/utils/types';
import { SKILL_COSTS } from '@/utils/constants';

export const RARITY_ORDER: SkillRarity[] = [
  'normal', 'magic', 'rare', 'unique', 'mythic', 'legend',
];

const RARITY_MAX_LEVEL: Record<SkillRarity, number> = {
  normal: 10,
  magic: 8,
  rare: 5,
  unique: 3,
  mythic: 2,
  legend: 1,
};

// ============================================================
// SKILLS
// ============================================================

export const SKILLS: Record<SkillId, SkillData> = {
  // --------------------------------------------------------
  // NORMAL (11 skills, baseCost=35, maxLevel=10)
  // --------------------------------------------------------
  rapid_fire: {
    id: 'rapid_fire',
    name: '속사',
    description: '공격 속도가 증가합니다.',
    rarity: 'normal',
    tags: ['SPEED'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xffaa00,
    effects: { fireRatePercent: { base: 0.08, perLevel: 0.08 } },
  },
  power_shot: {
    id: 'power_shot',
    name: '강화 사격',
    description: '공격력이 증가합니다.',
    rarity: 'normal',
    tags: ['SINGLE', 'FORCE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xff4444,
    effects: { damagePercent: { base: 0.12, perLevel: 0.12 } },
  },
  long_range: {
    id: 'long_range',
    name: '장거리 사격',
    description: '사거리가 증가합니다.',
    rarity: 'normal',
    tags: ['PROJECTILE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0x44aaff,
    effects: { rangePercent: { base: 0.10, perLevel: 0.10 } },
  },
  sharp_bullet: {
    id: 'sharp_bullet',
    name: '날카로운 탄환',
    description: '탄환이 적을 관통합니다.',
    rarity: 'normal',
    tags: ['PROJECTILE', 'FORCE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xcccccc,
    effects: { pierceCount: { base: 1, perLevel: 0.5 } },
  },
  tough_skin: {
    id: 'tough_skin',
    name: '강인한 방어',
    description: '오브 공격이 적을 뒤로 밀어냅니다.',
    rarity: 'normal',
    tags: ['DEFENSE', 'FORCE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0x88aa44,
    effects: { knockback: { base: 5, perLevel: 3 } },
  },
  exp_boost: {
    id: 'exp_boost',
    name: '경험치 부스트',
    description: '획득 경험치가 증가합니다.',
    rarity: 'normal',
    tags: ['ECONOMY'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xaa88ff,
    effects: { expBonusPercent: { base: 0.10, perLevel: 0.10 } },
  },
  focus_aim: {
    id: 'focus_aim',
    name: '집중 조준',
    description: '오브의 기본 공격력이 증가합니다.',
    rarity: 'normal',
    tags: ['SINGLE', 'FORCE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xff8866,
    effects: { flatDamage: { base: 3, perLevel: 2 } },
  },
  quick_reload: {
    id: 'quick_reload',
    name: '빠른 재장전',
    description: '오브의 공격 속도가 소폭 증가합니다.',
    rarity: 'normal',
    tags: ['SPEED'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xffcc44,
    effects: { flatFireRate: { base: 0.15, perLevel: 0.1 } },
  },
  iron_wall: {
    id: 'iron_wall',
    name: '철벽',
    description: '오브 공격에 감속 효과를 부여합니다.',
    rarity: 'normal',
    tags: ['DEFENSE', 'CC'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0x888888,
    effects: {
      slowPercent: { base: 0.05, perLevel: 0.03 },
      slowDuration: { base: 1, perLevel: 0.2 },
    },
  },
  scavenger: {
    id: 'scavenger',
    name: '파편 확산',
    description: '오브 공격에 소규모 범위 피해를 추가합니다.',
    rarity: 'normal',
    tags: ['AOE', 'FORCE'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0x44dd88,
    effects: { splashRadius: { base: 8, perLevel: 3 } },
  },
  steady_hand: {
    id: 'steady_hand',
    name: '정밀 사격',
    description: '치명타 확률이 증가합니다.',
    rarity: 'normal',
    tags: ['SINGLE', 'CRIT'],
    baseCost: SKILL_COSTS.normal,
    maxLevel: RARITY_MAX_LEVEL.normal,
    passive: true,
    color: 0xffaaaa,
    effects: { critChance: { base: 0.02, perLevel: 0.02 } },
  },

  // --------------------------------------------------------
  // MAGIC (12 skills, baseCost=130, maxLevel=8)
  // --------------------------------------------------------
  burn_shot: {
    id: 'burn_shot',
    name: '화염탄',
    description: '적에게 화상 피해를 입히는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['DOT', 'FIRE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xff4400,
    effects: {
      orbDamage: { base: 5, perLevel: 2 },
      orbFireRate: { base: 0.8, perLevel: 0.08 },
      orbRange: { base: 200, perLevel: 10 },
      fireDps: { base: 3, perLevel: 3 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  ember_blast: {
    id: 'ember_blast',
    name: '잔불 폭발',
    description: '범위 화염 피해를 입히는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['AOE', 'FIRE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xff6622,
    effects: {
      orbDamage: { base: 8, perLevel: 3 },
      orbFireRate: { base: 0.6, perLevel: 0.06 },
      orbRange: { base: 200, perLevel: 10 },
      splashRadius: { base: 30, perLevel: 5 },
    },
  },
  frost_shot: {
    id: 'frost_shot',
    name: '냉기탄',
    description: '적을 감속시키는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['CC', 'ICE', 'DEFENSE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0x44ddff,
    effects: {
      orbDamage: { base: 4, perLevel: 2 },
      orbFireRate: { base: 0.8, perLevel: 0.08 },
      orbRange: { base: 200, perLevel: 10 },
      slowPercent: { base: 0.25, perLevel: 0.05 },
      slowDuration: { base: 2, perLevel: 0.2 },
    },
  },
  chill_aura: {
    id: 'chill_aura',
    name: '한기 오라',
    description: '빠르게 냉기탄을 발사하여 감속 및 동결시킵니다.',
    rarity: 'magic',
    tags: ['CC', 'ICE', 'DEBUFF'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0x88eeff,
    effects: {
      orbDamage: { base: 3, perLevel: 2 },
      orbFireRate: { base: 1.0, perLevel: 0.1 },
      orbRange: { base: 180, perLevel: 8 },
      slowPercent: { base: 0.20, perLevel: 0.04 },
      slowDuration: { base: 2, perLevel: 0.3 },
      stunDuration: { base: 0.1, perLevel: 0.05 },
    },
  },
  shock_shot: {
    id: 'shock_shot',
    name: '감전탄',
    description: '적을 기절시키는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['CC', 'LIGHTNING'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xffff44,
    effects: {
      orbDamage: { base: 6, perLevel: 3 },
      orbFireRate: { base: 0.7, perLevel: 0.06 },
      orbRange: { base: 200, perLevel: 10 },
      stunDuration: { base: 0.3, perLevel: 0.1 },
    },
  },
  static_charge: {
    id: 'static_charge',
    name: '정전기 충전',
    description: '강력한 전기 방전을 연쇄시키는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['LIGHTNING', 'CHAIN'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xdddd00,
    effects: {
      orbDamage: { base: 12, perLevel: 6 },
      orbFireRate: { base: 0.3, perLevel: 0.04 },
      orbRange: { base: 220, perLevel: 12 },
      chainCount: { base: 2, perLevel: 1 },
      chainDamageRatio: { base: 0.8, perLevel: 0 },
    },
  },
  poison_shot: {
    id: 'poison_shot',
    name: '독침',
    description: '적에게 독 피해를 입히는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['DOT', 'NATURE', 'DEBUFF'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0x44ff44,
    effects: {
      orbDamage: { base: 4, perLevel: 2 },
      orbFireRate: { base: 0.8, perLevel: 0.08 },
      orbRange: { base: 200, perLevel: 10 },
      poisonDps: { base: 4, perLevel: 4 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  thorn_shot: {
    id: 'thorn_shot',
    name: '가시탄',
    description: '높은 기본 데미지의 가시 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['NATURE', 'FORCE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0x88cc44,
    effects: {
      orbDamage: { base: 8, perLevel: 4 },
      orbFireRate: { base: 0.7, perLevel: 0.06 },
      orbRange: { base: 200, perLevel: 10 },
    },
  },
  shadow_bolt: {
    id: 'shadow_bolt',
    name: '그림자 화살',
    description: '적에게 공포(강한 감속)를 유발하는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['DARK', 'CC'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0x8844cc,
    effects: {
      orbDamage: { base: 7, perLevel: 3 },
      orbFireRate: { base: 0.6, perLevel: 0.06 },
      orbRange: { base: 220, perLevel: 12 },
      slowPercent: { base: 0.30, perLevel: 0.05 },
      slowDuration: { base: 1.5, perLevel: 0.2 },
    },
  },
  splash_shot: {
    id: 'splash_shot',
    name: '파편탄',
    description: '범위 피해를 입히는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['AOE', 'PROJECTILE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xff8844,
    effects: {
      orbDamage: { base: 8, perLevel: 3 },
      orbFireRate: { base: 0.7, perLevel: 0.06 },
      orbRange: { base: 200, perLevel: 10 },
      splashRadius: { base: 15, perLevel: 8 },
    },
  },
  critical_strike: {
    id: 'critical_strike',
    name: '치명타',
    description: '치명타 확률과 치명타 데미지가 증가합니다.',
    rarity: 'magic',
    tags: ['CRIT', 'SINGLE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: true,
    color: 0xff2222,
    effects: {
      critChance: { base: 0.08, perLevel: 0.04 },
      critDamage: { base: 2.0, perLevel: 0 },
    },
  },
  bleed_shot: {
    id: 'bleed_shot',
    name: '출혈탄',
    description: '적에게 출혈 피해를 입히는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['DOT', 'FORCE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xcc2222,
    effects: {
      orbDamage: { base: 6, perLevel: 3 },
      orbFireRate: { base: 0.8, perLevel: 0.08 },
      orbRange: { base: 200, perLevel: 10 },
      bleedDps: { base: 3, perLevel: 2 },
      dotDuration: { base: 4, perLevel: 0 },
    },
  },
  wind_shot: {
    id: 'wind_shot',
    name: '바람탄',
    description: '적을 밀어내는 오브를 발사합니다.',
    rarity: 'magic',
    tags: ['CC', 'PROJECTILE', 'NATURE'],
    baseCost: SKILL_COSTS.magic,
    maxLevel: RARITY_MAX_LEVEL.magic,
    passive: false,
    color: 0xaaffaa,
    effects: {
      orbDamage: { base: 5, perLevel: 2 },
      orbFireRate: { base: 0.8, perLevel: 0.08 },
      orbRange: { base: 220, perLevel: 12 },
      knockback: { base: 20, perLevel: 10 },
    },
  },

  // --------------------------------------------------------
  // RARE (13 skills, baseCost=350, maxLevel=5)
  // --------------------------------------------------------
  chain_lightning: {
    id: 'chain_lightning',
    name: '연쇄 번개',
    description: '번개가 여러 적에게 연쇄되는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['CHAIN', 'AOE', 'LIGHTNING'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xffff00,
    effects: {
      orbDamage: { base: 12, perLevel: 6 },
      orbFireRate: { base: 0.5, perLevel: 0.08 },
      orbRange: { base: 250, perLevel: 15 },
      chainCount: { base: 2, perLevel: 1 },
      chainDamageRatio: { base: 0.7, perLevel: 0 },
    },
  },
  pierce_shot: {
    id: 'pierce_shot',
    name: '관통탄',
    description: '투사체가 여러 적을 관통하는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['PROJECTILE', 'AOE', 'FORCE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xaaaaaa,
    effects: {
      orbDamage: { base: 10, perLevel: 5 },
      orbFireRate: { base: 0.6, perLevel: 0.08 },
      orbRange: { base: 250, perLevel: 15 },
      pierceCount: { base: 2, perLevel: 1 },
    },
  },
  multi_shot: {
    id: 'multi_shot',
    name: '다중 사격',
    description: '동시에 여러 발을 발사합니다.',
    rarity: 'rare',
    tags: ['PROJECTILE', 'SPEED'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: true,
    color: 0xff6600,
    effects: {
      multiShot: { base: 1, perLevel: 1 },
    },
  },
  homing_missile: {
    id: 'homing_missile',
    name: '유도 미사일',
    description: '유도 미사일을 발사합니다. 레벨에 따라 미사일 수와 폭발 범위가 증가합니다.',
    rarity: 'rare',
    tags: ['PROJECTILE', 'AOE', 'FIRE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xff4444,
    effects: {
      orbDamage: { base: 20, perLevel: 10 },
      orbFireRate: { base: 0.5, perLevel: 0.1 },
      orbRange: { base: 250, perLevel: 15 },
      splashRadius: { base: 25, perLevel: 8 },
      missileCount: { base: 1, perLevel: 1 },
    },
  },
  frozen_field: {
    id: 'frozen_field',
    name: '동결 필드',
    description: '적 위치에 냉기 지대를 생성하여 감속시킵니다.',
    rarity: 'rare',
    tags: ['CC', 'AOE', 'ICE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0x88ddff,
    effects: {
      orbDamage: { base: 8, perLevel: 4 },
      orbFireRate: { base: 0.35, perLevel: 0.05 },
      orbRange: { base: 250, perLevel: 15 },
      thunderDuration: { base: 1.5, perLevel: 0.3 },
      thunderRadius: { base: 50, perLevel: 12 },
      thunderTicks: { base: 4, perLevel: 1 },
      slowPercent: { base: 0.30, perLevel: 0.05 },
      slowDuration: { base: 1, perLevel: 0.2 },
    },
  },
  poison_cloud: {
    id: 'poison_cloud',
    name: '독구름',
    description: '적 위치에 독 구름을 생성하여 범위 독 피해를 입힙니다.',
    rarity: 'rare',
    tags: ['DOT', 'AOE', 'NATURE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0x44cc44,
    effects: {
      orbDamage: { base: 6, perLevel: 3 },
      orbFireRate: { base: 0.35, perLevel: 0.05 },
      orbRange: { base: 250, perLevel: 15 },
      thunderDuration: { base: 2, perLevel: 0.4 },
      thunderRadius: { base: 40, perLevel: 10 },
      thunderTicks: { base: 5, perLevel: 1 },
      poisonDps: { base: 3, perLevel: 3 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  fire_trail: {
    id: 'fire_trail',
    name: '화염 흔적',
    description: '적 위치에 화염 지대를 남겨 지속 피해를 입힙니다.',
    rarity: 'rare',
    tags: ['DOT', 'AOE', 'FIRE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xff6600,
    effects: {
      orbDamage: { base: 8, perLevel: 5 },
      orbFireRate: { base: 0.4, perLevel: 0.05 },
      orbRange: { base: 250, perLevel: 15 },
      thunderDuration: { base: 2, perLevel: 0.3 },
      thunderRadius: { base: 30, perLevel: 8 },
      thunderTicks: { base: 6, perLevel: 1 },
      fireDps: { base: 4, perLevel: 3 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  shadow_strike: {
    id: 'shadow_strike',
    name: '그림자 일격',
    description: '느리지만 극도로 강력한 일격을 가하는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['DARK', 'CRIT', 'SINGLE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0x6644aa,
    effects: {
      orbDamage: { base: 30, perLevel: 18 },
      orbFireRate: { base: 0.25, perLevel: 0.05 },
      orbRange: { base: 280, perLevel: 15 },
    },
  },
  thunder_storm: {
    id: 'thunder_storm',
    name: '뇌격',
    description: '적 위치에 낙뢰를 떨어뜨려 1초간 해당 지점을 지져버립니다.',
    rarity: 'rare',
    tags: ['LIGHTNING', 'AOE', 'DOT'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xeeee44,
    effects: {
      orbDamage: { base: 15, perLevel: 8 },
      orbFireRate: { base: 0.4, perLevel: 0.05 },
      orbRange: { base: 280, perLevel: 15 },
      thunderRadius: { base: 35, perLevel: 7 },
      thunderDuration: { base: 1.0, perLevel: 0.15 },
      thunderTicks: { base: 5, perLevel: 1 },
    },
  },
  vine_trap: {
    id: 'vine_trap',
    name: '덩굴 덫',
    description: '적을 속박하고 감속시키는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['NATURE', 'CC', 'DEBUFF'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0x44aa44,
    effects: {
      orbDamage: { base: 6, perLevel: 3 },
      orbFireRate: { base: 0.5, perLevel: 0.08 },
      orbRange: { base: 220, perLevel: 12 },
      stunDuration: { base: 0.6, perLevel: 0.2 },
      slowPercent: { base: 0.40, perLevel: 0.05 },
      slowDuration: { base: 2, perLevel: 0.3 },
    },
  },
  ricochet: {
    id: 'ricochet',
    name: '도탄',
    description: '투사체가 적 사이에서 튕기는 오브를 발사합니다.',
    rarity: 'rare',
    tags: ['PROJECTILE', 'CHAIN', 'FORCE'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xbbbbbb,
    effects: {
      orbDamage: { base: 10, perLevel: 5 },
      orbFireRate: { base: 0.5, perLevel: 0.08 },
      orbRange: { base: 250, perLevel: 15 },
      chainCount: { base: 2, perLevel: 1 },
      chainDamageRatio: { base: 0.85, perLevel: 0 },
    },
  },
  blizzard: {
    id: 'blizzard',
    name: '눈보라',
    description: '적 위치에 넓은 냉기 지대를 생성하여 감속과 피해를 가합니다.',
    rarity: 'rare',
    tags: ['ICE', 'AOE', 'CC', 'DOT'],
    baseCost: SKILL_COSTS.rare,
    maxLevel: RARITY_MAX_LEVEL.rare,
    passive: false,
    color: 0xaaddff,
    effects: {
      orbDamage: { base: 10, perLevel: 5 },
      orbFireRate: { base: 0.3, perLevel: 0.05 },
      orbRange: { base: 280, perLevel: 15 },
      thunderDuration: { base: 2, perLevel: 0.3 },
      thunderRadius: { base: 70, perLevel: 15 },
      thunderTicks: { base: 5, perLevel: 1 },
      slowPercent: { base: 0.35, perLevel: 0.05 },
      slowDuration: { base: 1.5, perLevel: 0.2 },
    },
  },

  // --------------------------------------------------------
  // UNIQUE (9 skills, baseCost=600, maxLevel=3)
  // --------------------------------------------------------
  execute: {
    id: 'execute',
    name: '처형',
    description: '체력이 낮은 적에게 즉사 효과를 발동합니다.',
    rarity: 'unique',
    tags: ['CRIT', 'SINGLE', 'DARK'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xaa0000,
    effects: {
      executeThreshold: { base: 0.15, perLevel: 0.05 },
    },
  },
  soul_harvest: {
    id: 'soul_harvest',
    name: '영혼 수확',
    description: '경험치 획득량이 크게 증가합니다.',
    rarity: 'unique',
    tags: ['ECONOMY', 'DARK', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xaa44ff,
    effects: {
      expBonusPercent: { base: 0.20, perLevel: 0.15 },
    },
  },
  mirror_orb: {
    id: 'mirror_orb',
    name: '거울 오브',
    description: '오브의 멀티샷 수가 증가합니다.',
    rarity: 'unique',
    tags: ['SUMMON', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xddddff,
    effects: {
      multiShot: { base: 1, perLevel: 1 },
    },
  },
  overcharge: {
    id: 'overcharge',
    name: '과충전',
    description: '공격력이 크게 증가하지만 공격 속도가 감소합니다.',
    rarity: 'unique',
    tags: ['SCALE', 'LIGHTNING'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xffff88,
    effects: {
      damagePercent: { base: 0.25, perLevel: 0.15 },
      flatFireRate: { base: -0.3, perLevel: 0 },
    },
  },
  berserker: {
    id: 'berserker',
    name: '광전사',
    description: '공격력과 공격 속도가 증가합니다.',
    rarity: 'unique',
    tags: ['SCALE', 'SPEED', 'FORCE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xff2200,
    effects: {
      damagePercent: { base: 0.15, perLevel: 0.10 },
      fireRatePercent: { base: 0.10, perLevel: 0.05 },
    },
  },
  ice_age: {
    id: 'ice_age',
    name: '빙하기',
    description: '모든 CC 효과의 지속 시간이 증가합니다.',
    rarity: 'unique',
    tags: ['ICE', 'CC', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0x88ffff,
    effects: {
      slowDuration: { base: 1.0, perLevel: 0.5 },
      stunDuration: { base: 0.3, perLevel: 0.15 },
    },
  },
  plague_bearer: {
    id: 'plague_bearer',
    name: '역병 전파자',
    description: '모든 DOT 피해가 증가합니다.',
    rarity: 'unique',
    tags: ['NATURE', 'DOT', 'CHAIN', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0x44aa00,
    effects: {
      fireDps: { base: 4, perLevel: 3 },
      poisonDps: { base: 4, perLevel: 3 },
      bleedDps: { base: 4, perLevel: 3 },
    },
  },
  inferno_core: {
    id: 'inferno_core',
    name: '지옥의 핵',
    description: '화염 피해와 스플래시 범위가 증가합니다.',
    rarity: 'unique',
    tags: ['FIRE', 'DOT', 'AOE', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: true,
    color: 0xff4400,
    effects: {
      fireDps: { base: 5, perLevel: 5 },
      splashRadius: { base: 10, perLevel: 8 },
    },
  },
  void_rift: {
    id: 'void_rift',
    name: '공허의 균열',
    description: '적 위치에 공허 지대를 생성하여 감속하고 피해를 입힙니다.',
    rarity: 'unique',
    tags: ['DARK', 'DEBUFF', 'AOE', 'SCALE'],
    baseCost: SKILL_COSTS.unique,
    maxLevel: RARITY_MAX_LEVEL.unique,
    passive: false,
    color: 0x4400aa,
    effects: {
      orbDamage: { base: 20, perLevel: 10 },
      orbFireRate: { base: 0.3, perLevel: 0.05 },
      orbRange: { base: 260, perLevel: 15 },
      thunderDuration: { base: 3, perLevel: 1 },
      thunderRadius: { base: 45, perLevel: 10 },
      thunderTicks: { base: 6, perLevel: 1 },
      slowPercent: { base: 0.25, perLevel: 0.08 },
      slowDuration: { base: 1.5, perLevel: 0.3 },
    },
  },

  // --------------------------------------------------------
  // MYTHIC (7 skills, baseCost=1200, maxLevel=2)
  // --------------------------------------------------------
  elemental_fusion: {
    id: 'elemental_fusion',
    name: '원소 융합',
    description: '모든 공격 데미지가 크게 증가합니다.',
    rarity: 'mythic',
    tags: ['FIRE', 'ICE', 'LIGHTNING', 'SCALE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0xff88ff,
    effects: {
      damagePercent: { base: 0.30, perLevel: 0.15 },
    },
  },
  death_mark: {
    id: 'death_mark',
    name: '죽음의 표식',
    description: '적의 즉사 체력 기준이 증가합니다.',
    rarity: 'mythic',
    tags: ['DARK', 'CRIT', 'DEBUFF', 'SCALE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0x440044,
    effects: {
      executeThreshold: { base: 0.10, perLevel: 0.05 },
    },
  },
  chain_reaction: {
    id: 'chain_reaction',
    name: '연쇄 반응',
    description: '체인 횟수와 스플래시 범위가 증가합니다.',
    rarity: 'mythic',
    tags: ['CHAIN', 'AOE', 'SCALE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0xff8800,
    effects: {
      splashRadius: { base: 15, perLevel: 10 },
      chainCount: { base: 1, perLevel: 1 },
    },
  },
  eternal_winter: {
    id: 'eternal_winter',
    name: '영원한 겨울',
    description: '적 위치에 극한의 냉기 지대를 생성하여 감속, 동결, 피해를 가합니다.',
    rarity: 'mythic',
    tags: ['ICE', 'CC', 'AOE', 'DOT'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: false,
    color: 0xccffff,
    effects: {
      orbDamage: { base: 15, perLevel: 10 },
      orbFireRate: { base: 0.25, perLevel: 0.05 },
      orbRange: { base: 300, perLevel: 20 },
      thunderDuration: { base: 2.5, perLevel: 0.5 },
      thunderRadius: { base: 70, perLevel: 15 },
      thunderTicks: { base: 6, perLevel: 1 },
      slowPercent: { base: 0.40, perLevel: 0.10 },
      slowDuration: { base: 2, perLevel: 0.3 },
      stunDuration: { base: 0.2, perLevel: 0.1 },
    },
  },
  phantom_army: {
    id: 'phantom_army',
    name: '유령 군단',
    description: '멀티샷이 증가하지만 개별 데미지가 약간 감소합니다.',
    rarity: 'mythic',
    tags: ['SUMMON', 'DARK', 'SCALE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0x8844cc,
    effects: {
      multiShot: { base: 1, perLevel: 1 },
      damagePercent: { base: -0.10, perLevel: 0.05 },
    },
  },
  wildfire: {
    id: 'wildfire',
    name: '들불',
    description: '화염 피해와 체인 횟수가 증가합니다.',
    rarity: 'mythic',
    tags: ['FIRE', 'DOT', 'CHAIN', 'AOE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0xff6600,
    effects: {
      fireDps: { base: 5, perLevel: 5 },
      chainCount: { base: 1, perLevel: 1 },
    },
  },
  toxic_evolution: {
    id: 'toxic_evolution',
    name: '독성 진화',
    description: '독 피해와 DOT 지속시간이 크게 증가합니다.',
    rarity: 'mythic',
    tags: ['NATURE', 'DOT', 'DEBUFF', 'SCALE'],
    baseCost: SKILL_COSTS.mythic,
    maxLevel: RARITY_MAX_LEVEL.mythic,
    passive: true,
    color: 0x00aa44,
    effects: {
      poisonDps: { base: 8, perLevel: 8 },
      dotDuration: { base: 2, perLevel: 1 },
    },
  },

  // --------------------------------------------------------
  // LEGEND (8 skills, baseCost=2000, maxLevel=1)
  // --------------------------------------------------------
  apocalypse: {
    id: 'apocalypse',
    name: '종말',
    description: '적 위치에 초대형 폭발 지대를 생성하여 파괴적인 피해를 입힙니다.',
    rarity: 'legend',
    tags: ['AOE', 'DOT', 'FIRE', 'DARK'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0xff0000,
    effects: {
      orbDamage: { base: 80, perLevel: 0 },
      orbFireRate: { base: 0.1, perLevel: 0 },
      orbRange: { base: 500, perLevel: 0 },
      thunderDuration: { base: 2, perLevel: 0 },
      thunderRadius: { base: 180, perLevel: 0 },
      thunderTicks: { base: 3, perLevel: 0 },
    },
  },
  time_warp: {
    id: 'time_warp',
    name: '시간 왜곡',
    description: '오브 속도를 크게 높이고 적을 감속시킵니다.',
    rarity: 'legend',
    tags: ['SPEED', 'CC', 'SCALE'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: true,
    color: 0x44aaff,
    effects: {
      fireRatePercent: { base: 0.50, perLevel: 0 },
      slowPercent: { base: 0.30, perLevel: 0 },
      slowDuration: { base: 3, perLevel: 0 },
    },
  },
  black_hole: {
    id: 'black_hole',
    name: '블랙홀',
    description: '적 위치에 블랙홀 지대를 생성하여 강한 감속과 피해를 입힙니다.',
    rarity: 'legend',
    tags: ['CC', 'AOE', 'SUMMON', 'DARK'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0x220044,
    effects: {
      orbDamage: { base: 15, perLevel: 0 },
      orbFireRate: { base: 0.15, perLevel: 0 },
      orbRange: { base: 400, perLevel: 0 },
      thunderDuration: { base: 4, perLevel: 0 },
      thunderRadius: { base: 90, perLevel: 0 },
      thunderTicks: { base: 8, perLevel: 0 },
      slowPercent: { base: 0.50, perLevel: 0 },
      slowDuration: { base: 4, perLevel: 0 },
    },
  },
  infinity_chain: {
    id: 'infinity_chain',
    name: '무한 연쇄',
    description: '체인 횟수가 크게 증가합니다.',
    rarity: 'legend',
    tags: ['CHAIN', 'SCALE', 'LIGHTNING'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: true,
    color: 0xffff44,
    effects: {
      chainCount: { base: 3, perLevel: 0 },
    },
  },
  dragon_breath: {
    id: 'dragon_breath',
    name: '용의 숨결',
    description: '넓은 스플래시 범위에 강력한 화염 피해를 입히는 오브를 발사합니다.',
    rarity: 'legend',
    tags: ['DOT', 'AOE', 'PROJECTILE', 'FIRE'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0xff2200,
    effects: {
      orbDamage: { base: 80, perLevel: 0 },
      orbFireRate: { base: 0.5, perLevel: 0 },
      orbRange: { base: 300, perLevel: 0 },
      splashRadius: { base: 90, perLevel: 0 },
      fireDps: { base: 15, perLevel: 0 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  world_tree: {
    id: 'world_tree',
    name: '세계수',
    description: '적 위치에 세계수 지대를 생성하여 감속, 독, 피해를 가합니다.',
    rarity: 'legend',
    tags: ['NATURE', 'SUMMON', 'AOE', 'SCALE'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0x22aa22,
    effects: {
      orbDamage: { base: 10, perLevel: 0 },
      orbFireRate: { base: 0.2, perLevel: 0 },
      orbRange: { base: 350, perLevel: 0 },
      thunderDuration: { base: 5, perLevel: 0 },
      thunderRadius: { base: 80, perLevel: 0 },
      thunderTicks: { base: 10, perLevel: 0 },
      slowPercent: { base: 0.35, perLevel: 0 },
      slowDuration: { base: 3, perLevel: 0 },
      poisonDps: { base: 8, perLevel: 0 },
      dotDuration: { base: 3, perLevel: 0 },
    },
  },
  absolute_zero: {
    id: 'absolute_zero',
    name: '절대 영도',
    description: '적 위치에 초대형 동결 지대를 생성하여 적을 오래 동결시킵니다.',
    rarity: 'legend',
    tags: ['ICE', 'CC', 'AOE', 'SCALE'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0xeeffff,
    effects: {
      orbDamage: { base: 20, perLevel: 0 },
      orbFireRate: { base: 0.08, perLevel: 0 },
      orbRange: { base: 500, perLevel: 0 },
      thunderDuration: { base: 3, perLevel: 0 },
      thunderRadius: { base: 200, perLevel: 0 },
      thunderTicks: { base: 1, perLevel: 0 },
      stunDuration: { base: 2.5, perLevel: 0 },
    },
  },
  storm_lord: {
    id: 'storm_lord',
    name: '폭풍의 군주',
    description: '강력한 연쇄 번개와 스플래시 피해를 입히는 오브를 발사합니다.',
    rarity: 'legend',
    tags: ['LIGHTNING', 'CHAIN', 'AOE', 'SUMMON'],
    baseCost: SKILL_COSTS.legend,
    maxLevel: RARITY_MAX_LEVEL.legend,
    passive: false,
    color: 0xffff00,
    effects: {
      orbDamage: { base: 25, perLevel: 0 },
      orbFireRate: { base: 0.3, perLevel: 0 },
      orbRange: { base: 350, perLevel: 0 },
      chainCount: { base: 4, perLevel: 0 },
      chainDamageRatio: { base: 0.8, perLevel: 0 },
      splashRadius: { base: 40, perLevel: 0 },
    },
  },
};

// ============================================================
// Skill Evolution Chains
// ============================================================

/** 스킬 레벨 5 달성 시 진화 가능한 후보 목록 */
export const SKILL_EVOLUTION: Partial<Record<SkillId, SkillId[]>> = {
  // 경제
  exp_boost: ['soul_harvest'],
  // 공격
  rapid_fire: ['berserker'],
  power_shot: ['elemental_fusion'],
  focus_aim: ['overcharge'],
  // 크리티컬
  steady_hand: ['critical_strike'],
  // 방어 / CC
  iron_wall: ['ice_age'],
  tough_skin: ['mirror_orb'],
  // 범위
  scavenger: ['chain_reaction'],
  sharp_bullet: ['pierce_shot'],
};

export const EVOLUTION_LEVEL = 5;

// ============================================================
// Helper exports
// ============================================================

/** All skills as a flat array */
export const SKILL_LIST: SkillData[] = Object.values(SKILLS);

/** Filter skills by rarity */
export function getSkillsByRarity(rarity: SkillRarity): SkillData[] {
  return SKILL_LIST.filter((s) => s.rarity === rarity);
}
